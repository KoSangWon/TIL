# 1. 웹과 네트워크의 기본
## 1.1. 웹은 HTTP로 나타낸다.
- 웹 브라우저는 웹 브라우저 주소 입력란에 지정된 URL에 의지해서 웹 서버로부터 리소스라고 불리는 파일 등의 정보를 얻고 있다.
- 서버에 의뢰를 하는 웹 브라우저 등을 클라이언트라고 부른다.
- 클라이언트에서 서버까지 일련의 흐름을 결정하고 있는 것은 웹에서 HTTP(HyperText Transfer Protocol)이라 불리는 프로토콜이다.
- 프로토콜이라는 의미는 "약속"이다. 즉, 웹은 HTTP라는 약속을 사용한 통신으로 이루어져 있다.

## 1.2. HTTP는 이렇게 태어났다.
- 웹은 지식 공유를 위해 고안되었다.
- 팀 버너스 리 박사는 세계의 연구자들과 지식을 공용하도록 시스템을 고안하였고 최초로 고안한 것은 WWW의 기본 개념이 되는 것이었다.
- WWW를 구성하는 기술로서, 문서 기술 언어로는 HTML, 문서 전송 프로토콜로는 HTTP, 문서의 주소를 지정하는 방법으로 URL 등 세 가지가 제안되었다.
- HTTP는 등장 당시 주로 텍스트를 전송하기 위한 프로토콜이었지만, 프로토콜 자체가 상당히 심플해서 여러 가지 응용 방법을 고려해 기능이 계속 추가되었다. 지금은 웹을 넘어 다양하게 사용되는 프로토콜이 되었다.

## 1.3. 네트워크의 기본은 TCP/IP
- 인터넷을 포함하여 일반적으로 사용하고 있는 네트워크는 TCP/IP라는 프로토콜에서 움직이고 있다. HTTP는 그 중 하나이다.

### 1.3.1. TCP/IP는 프로토콜의 집합
- 컴퓨터와 네트워크 기기가 상호간에 통신하기 위해서는 서로 같은 방법으로 통신해야 한다. 예를 들면, 어떻게 상대를 찾고 어떻게 상대에게 이야기를 시작하고 종료할까 등 규칙을 결정할 필요가 있다.
- 이렇게 서로 다른 하드웨어와 운영체제 등을 가지고 서로 통신을 하기 위해서는 모든 요소에 규칙이 필요하게 된다. 이러한 규칙을 **프로토콜**이라고 부른다.
- **인터넷과 관련된 프로토콜들을 모은 것을 TCP/IP라고 부른다.**

### 1.3.2. 계층으로 관리하는 TCP/IP
- TCP/IP는 '애플리케이션 계층', '트랜스포트 계층', '네트워크 계층', '링크 계층' 이렇게 4계층으로 나뉘어 있다.
- 계층화되면 어디선가 사양이 변경되었을 때 변경된 계층만 바꾸면 된다. 
- 계층화하면 자신이 당당하는 부분만 고려하면 되기 때문에 설계가 편하다.
- 애플리케이션 계층: 유저에게 제공되는 애플리케이션에서 사용하는 통신의 움직임을 결정. FTP, DNS, HTTP
- 트랜스포트 계층: 애플리케이션 계층에 네트워크로 접속되어 있는 2대의 컴퓨터 사이의 데이터 흐름을 제공. TCP, UDP
- 네트워크 계층: 네트워크 상에서 패킷(전송하는 데이터의 최소 단위)의 이동을 다룬다. 어떠한 경로를 거쳐 상대의 컴퓨터까지 보낼지 결정하기도 한다.
- 링크 계층: 네트워크에 접속하는 하드웨어적인 면을 다룬다. 케이블

### 1.3.3. TCP/IP 통신의 흐름
- TCP/IP로 통신을 할 때 계층을 순서대로 거쳐 상대와 통신을 한다. 송신하는 측은 애플리케이션 계층에서 내려가고, 수신하는 측은 애플리케이션 계층으로 올라간다.
1. HTTP를 예로 설명하면 먼저 송신측 클라이언트의 애플리케이션 계층(HTTP)에서 어느 웹 페이지를 보고 싶다는 HTTP 리퀘스트를 지시한다.
2. 트랜스포트 계층(TCP)에서는 애플리케이션 계층에서 받은 데이터(HTTP 메시지)를 통신하기 쉽게 조각내어 안내 번호와 포트 번호를 붙여 네트워크 계층에 전달한다.
3. 네트워크 계층(IP)에서는 수신지 MAC 주소를 추가해서 링크 계층에 전달한다. 이로써 네트워크를 통해 송신할 준비가 되었다.
4. 수신측 서버는 링크 계층에서 데이터를 받아들여 순서대로 위의  계층에 전달하여 애플리케이션 계층까지 도달한다. 애플리케이션 계층에 도달하게 되면 드디어 클라이언트가 발신했던 HTTP 리퀘스트 내용을 수신할 수 있다.

- 각 계층을 거칠 때는  반드시 헤더로 불려지는 해당 계층마다 해당 계층에 필요한 정보를 추가한다. 반대로 수신측에서는 각 계층을 거칠 때마다 반드시 해당 계층마다 사용한 헤더를 삭제한다. 이렇게 정보를 감싸는 것을 캡슐화라고 한다.


## 1.4. HTTP와 관계가 깊은 프로토콜은 IP/TCP/DNS
### 1.4.1. 배송을 담당하는 IP
- IP(Internet Protocol)는 계층으로 말하자면 네트워크 층에 해당된다.
- 'IP'와 'IP 주소'는 다르다. 'IP'는 프로토콜의 명칭이다.
- IP의 역할은 개개의 패킷을 상대방에게 전달하는 것이다. 상대방에게 전달하기 까지 여러 가지 요소가 필요한데 그 중 IP 주소와 MAC 주소가 중요하다.
- IP 주소는 각 노드에 부여된 주소를 가리키고 MAC 주소는 각 네트워크  카드에 할당된 고유의 주소이다. IP 주소는 변경 가능하지만 기본적으로 MAC 주소는 변경할 수 없다.
- IP 통신은 MAC 주소에 의존해서 통신을 한다. 여러 대의 컴퓨터와 네트워크 기기를 중계해서 상대방으로 도착하는데 그렇게 중계하는 동안 다음으로 중계할 곳의 MAC 주소를 사용하여 목적지를 찾아가는 것이다. 이때 ARP(Address Resolution Protocol)이라는 프로토콜이 사용된다.
- ARP는 주소를 해결하기 위한 프로토콜 중 하나인데, 수신지의 IP 주소를 바탕으로 MAC 주소를 조사할 수 있다.
- 목적지까지 중계를 하는 도중 컴퓨터와 라우터 등 네트워크 기기는 목적지에 도착하기까지 대략적인 목적지만 알고 있다. 어떤 컴퓨터나 네트워크 기기도 인터넷 전체를 상세하게 파악하고 있지 못하다.

### 1.4.2. 신뢰성을 담당하는 TCP
- TCP는 트랜스포트 층에 해당하는데, 신뢰성 있는 바이트 스트림 서비스를 제공한다. 
- 바이트 스트림 서비스란 용량이 큰 데이터를 보내기 쉽게 TCP 세그먼트라고 불리는 단위 패킷으로 작게 분해하여 관리하는 것을 말하고, 신뢰성 있는 서비스는 상대방에게 보내는 서비스를 의미한다. 
- 결국 TCP는 대용량의 데이터를 보내기 쉽게 작게 분해하여 상대에게 보내고, 정확하게 도착했는지 확인하는 역할을 담당하고 있다.
- TCP는 **three way handshaking** 방법을 사용하고 있다.
- 송신측에서 최초로 SYN 플래그를 보내면 수신측에서 SYN/ACK 플래그로 송신측과 접속함과 동시에 패킷을 수신한 사실을 전달한다. 마지막으로 송신측이 'ACK' 플래그를 보내 패킷 교환이 완료되었음을 전한다.

## 1.5. 이름 해결을 담당하는 DNS
- DNS(Domain Name System)는 HTTP와 같이 응용 계층 시스템에서 도메인 이름과 IP 주소 이름 확인을 제공한다. 컴퓨터는 IP 주소와는 별도로 호스트 이름과 도메인 이름을 붙일 수 있다.
- DNS는 도메인명에서 IP 주소를 조사하거나 반대로 IP 주소로부터 도메인명을 조사하는 서비스를 제공하고 있다.

## 1.6. 각각과 HTTP와의 관계
1. 클라이언트 측에서 A.com 웹페이지를 보고 싶다.
2. DNS에서 A.com의 IP 주소를 알려준다.
3. HTTP 담당 웹 서버에 보낼 HTTP 메시지를 작성한다. A.com의 리소스를 주세요.
4. TCP가 통신하기 쉽도록 HTTP 메시지를 패킷으로 분해한다. 조각내서 일련번호를 부여한다.
5. IP가 상대가 어디에 있는지 찾아 중계해 가면서 배송한다.
6. 서버 측은 TCP가 상대방으로부터 패킷을 수신한다. 도착한 패킷을 일련번호를 보고 조립한다.
7. HTTP가 웹 서버에 대한 리퀘스트  내용을 처리한다. A.com의 리소스를 원하는군요.
8. 리퀘스트 처리 결과도 마찬가지로 TCP/IP 통신을 통해 순서대로 클라이언트에 반환한다.


## 1.7. URI와 URL
- URI보다 URL(Uniform Resource Locator)가 더 익숙할 것이다.
- 웹 브라우저 등으로 웹 페이지를 표시하기 위해 입력하는 주소가 바로 URL 이다. 예를 들어, https://www.google.co.kr이 URL이다.
### 1.7.1. URI는 리소스 식별자
- URI는 Uniform Resource Identifiers의 약자이지만, RFC2396에서는 각각의 단어가 다음과 같이 정의되어 있다.
- Uniform
  - 통일(Uniformity)된 서식을 결정하는 것으로, 여러 가지 종류의 리소스 지정 방법을 같은 맥락에서 구별없이 취급할 수 있게 한다.
  - 새로운 스키마(http:와 ftp 등) 도입을 용이하게 한다.
- Resource
  - 도큐먼트 파일뿐 아니라 이미지와 서비스 등 다른 것과 구별할 수 있는 것은 모두 리소스다.
- Identifier
  - 식별 가능한 것을 참조하는 오브젝트이며 식별자로 불린다.

- 결국 URI는 스키마를 나타내는 리소스를 식별하기 위한 식별자이다. 

### 1.7.2. Domain, URI, URL
*http://abcd.org:3000/main?id=HTML&page=12#ch1*
- http => protocol
- abcd.org => host(domain)
- 3000 => port
- main => path
- id=HTML&page12 => query string
- ch1 => fragment identifier

- URL은 자원의 위치를 나타내는 것이고 URI는 자원의 식별자이다.
- http://abcd.org:3000/main 까지는 URL이고(URI이기도 한), http://abcd.org:3000/main?id=HTML&page=12#ch1 이것은 URI라고 할 수 있다.(URL은 아닌)
- domain은 위 예시에서 abcd.org라고 할 수 있다. URL은 도메인을 포함하고 있다.
